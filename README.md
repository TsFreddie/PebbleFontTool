# Pebble Font Tool

This is a set of scripts and tooling that helps generate or design fonts for PebbleOS. This tool is specifically designed for CJK fonts.

The tooling codes are written in TypeScript and can be run directly with [Bun](https://bun.sh/).

## Bold Conversion

Bold font can be generated by copying the glyph 1px to the right

![Bold Conversion](./images/bold.png)

This conversion can cut the design work in half by not having to worry about making dedicated BOLD variants.

## Codepoints Coverage

> PebbleOS currently works directly with codepoints with no concept of graphemes / glyphs.

For CJK codepoints specifically, this font targets specific standard documents. These documents are compiled into a giant codepoint list and use the following steps to determine which to include:

- Read [pages](./data/pages) directory for all the de-duplicated codepoints
- Remove all codepoints exceeding 16 bits
- Read [extra](./data/pages/extra) directory for additional codepoints
- Reference the [FREQUENCY](./data/FREQUENCY) file and cut the extra characters until we reach a total of 10600 characters
- Read [others](./data/pages/others) directory and add them to the final set

The current hard cap PebbleOS can hold in a single PBF file is 10922 16-bit codepoints.
We set our limit to 10600 to leave extra spaces for missing characters in other languages or special characters.

### Document Coverage

| Script                       | Document                   | Coverage            |
| ---------------------------- | -------------------------- | ------------------- |
| Simplified Chinese           | 通用规范汉字表（一级）     | 3500/3500 (100.00%) |
| Traditional Chinese          | 常用國字標準字體表         | 4808/4808 (100.00%) |
| Japanese Standard Kanji      | 日本常用漢字表             | 2135/2136 (99.95%)  |
| Hong Kong Variants (Common)  | 常用香港外字表（AB1234ㄅ） | 456/532 (85.71%)    |
| Korean Hanja                 | 한문 교육용 기초한자       | 1799/1800 (99.94%)  |
| Bopomofo                     | 注音符號                   | 43/43 (100.00%)     |
| Hiragana + Katakana          | 仮名                       | 187/187 (100.00%)   |
| Hangul                       | 한글                       | 2350/2350 (100.00%) |
| Periodic Table (Simplified)  | 元素周期表                 | 109/118 (92.37%)    |
| Periodic Table (Traditional) | 元素週期表                 | 114/118 (96.61%)    |

Supplementary Coverage

| Script                         | Document               | Coverage           |
| ------------------------------ | ---------------------- | ------------------ |
| Simplified Chinese (Secondary) | 通用规范汉字表（二级） | 2089/3000 (69.63%) |
| Hong Kong Variants (Remaining) | 常用香港外字表（其餘） | 129/1066 (12.10%)  |

## Licenses

This set of scripts and tooling is licensed under MIT.

## Acknowledgements

[Unifont](https://unifoundry.com/unifont/index.html) ([OFL 1.1](https://unifoundry.com/OFL-1.1.txt) Licensed) is used as a availability reference and as the base reference for the design tool.

[常用香港外字表 (suppchara)](https://github.com/ichitenfont/suppchara) ([CC BY 4.0](https://github.com/ichitenfont/suppchara/blob/master/License.md) Licensed) is used to add common variants used in Hong Kong.

A [FREQUENCY](./data/FREQUENCY) file derived from "[Chinese character list from 2.5 billion words corpus ordered by frequency](https://faculty.blcu.edu.cn/xinghb/zh_CN/article/167473/content/1437.htm)" is used as a reference to reduce the number of glyphs supported.
